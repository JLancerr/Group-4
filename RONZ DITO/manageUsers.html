<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f9f9f9;
            color: #333;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 2em;
            color: #333;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            table-layout: fixed;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        th {
            background-color: #f4f4f4;
            transition: background-color 0.3s;
        }

        th:hover {
            background-color: #ddd;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        tr:hover {
            background-color: #f1f1f1;
            transition: background-color 0.3s;
        }

        .search-bar {
            margin-bottom: 20px;
            margin-left: 10px;
        }

        .search-bar input {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            width: 200px;
        }

        .search-bar button {
            padding: 10px;
            border: 1px solid #ccc;
            background-color: #f4f4f4;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .search-bar button:hover {
            background-color: #ddd;
            transform: scale(1.05);
        }

        .pagination {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .pagination button {
            padding: 5px 10px;
            border: 1px solid #ccc;
            background-color: #f4f4f4;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }

        .pagination button:hover {
            background-color: #ddd;
            transform: scale(1.1);
        }

        .pagination button[style*="font-weight: bold"] {
            background-color: #333;
            color: #fff;
        }

        button.action-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            display: inline-block;
        }

        button.action-btn:hover {
            background-color: #0056b3;
            transform: scale(1.1);
        }

        button.delete-btn {
            background-color: #dc3545;
        }

        button.delete-btn:hover {
            background-color: #a71d2a;
        }

        /* Modal style for the Edit form */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        .modal.show {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            width: 400px;
            animation: modalFadeIn 0.5s ease-out;
        }

        @keyframes modalFadeIn {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .modal h2 {
            text-align: center;
        }

        .modal input, .modal select {
            width: 95%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            transition: border-color 0.3s ease;
        }

        .modal select {
            width: 101%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            transition: border-color 0.3s ease;
        }

        .modal input:focus, .modal select:focus {
            border-color: #007bff;
        }

        .modal button {
            width: 48%;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            margin: 10px 1%;
        }


        .modal button:hover {
            background-color: #0056b3;
            transform: scale(1.05);
        }

        .modal button.cancel-btn {
            background-color: #dc3545;
        }

        .modal button.cancel-btn:hover {
            background-color: #a71d2a;
        }
    </style>
</head>
<body>
    <h1>ADMIN DASHBOARD</h1>

    <div class="search-bar">
        <input type="text" id="search" placeholder="Search users...">
        <button onclick="searchUsers()">Search</button>
    </div>

    <table>
        <thead>
            <tr>
                <th style="width: 22%;">USERNAME</th>
                <th style="width: 22%;">EMAIL</th>
                <th style="width: 15%;">ROLE</th>
                <th style="width: 15%;">SUBSCRIPTION STATUS</th>
                <th style="width: 8%;">START DATE</th>
                <th style="width: 8%;">END DATE</th>
                <th style="width: 10%;">ACTIONS</th>
            </tr>
        </thead>
        <tbody id="userTableBody">
            <!-- Rows will be dynamically populated here -->
        </tbody>
    </table>

    <div class="pagination" id="pagination">
        <!-- Pagination buttons will be dynamically generated -->
    </div>

    <!-- Edit User Modal -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <h2>EDIT USER</h2>
            <form id="editForm" onsubmit="saveUserChanges(event)">
                <input type="text" id="editUsername" placeholder="Username" required>
                <input type="email" id="editEmail" placeholder="Email" required>
                
                <!-- Role Dropdown -->
                <select id="editRole" required>
                    <option value="" disabled selected>Select Role</option>
                    <option value="admin">Admin</option>
                    <option value="user">User</option>
                </select>

                <!-- Subscription Status Dropdown -->
                <select id="editSubscriptionStatus" required>
                    <option value="" disabled selected>Select Subscription Status</option>
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                </select>

                <!-- Start Date -->
                <input type="date" id="editStartDate" required>

                <!-- End Date -->
                <input type="date" id="editEndDate" required>

                <div style="text-align: center;">
                    <button type="submit">Save Changes</button>
                    <button type="button" class="cancel-btn" onclick="closeModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // FAKE USERS / ALISIN NALANG PAG ICONNECT NA SA DATA BASE
        const originalUsers = Array.from({ length: 50 }, (_, i) => ({
            id: i + 1,
            username: `User${i + 1}`,
            email: `user${i + 1}@example.com`,
            role: i % 2 === 0 ? 'admin' : 'user',
            subscriptionStatus: i % 3 === 0 ? 'inactive' : 'active',
            startDate: `2023-01-${String(i % 28 + 1).padStart(2, '0')}`,
            endDate: `2024-01-${String(i % 28 + 1).padStart(2, '0')}`
        }));

        let users = [...originalUsers]; // Start with all users
        let currentPage = 1;
        const rowsPerPage = 10;
        let currentUserIndex = null; // Store the index of the user being edited

        // Display users in the table
        function displayUsers() {
            const tbody = document.getElementById('userTableBody');
            tbody.innerHTML = '';

            const start = (currentPage - 1) * rowsPerPage;
            const end = start + rowsPerPage;
            const currentUsers = users.slice(start, end);

            currentUsers.forEach((user, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.username}</td>
                    <td>${user.email}</td>
                    <td>${user.role}</td>
                    <td>${user.subscriptionStatus}</td>
                    <td>${user.startDate}</td>
                    <td>${user.endDate}</td>
                    <td>
                        <button class="action-btn" onclick="editUser(${start + index})">Edit</button>
                        <button class="action-btn delete-btn" onclick="deleteUser(${start + index})">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });

            displayPagination();
        }

        // Display pagination
        function displayPagination() {
            const pagination = document.getElementById('pagination');
            pagination.innerHTML = '';

            const totalPages = Math.ceil(users.length / rowsPerPage);
            for (let i = 1; i <= totalPages; i++) {
                const button = document.createElement('button');
                button.textContent = i;
                button.onclick = () => {
                    currentPage = i;
                    displayUsers();
                };
                if (i === currentPage) button.style.fontWeight = 'bold';
                pagination.appendChild(button);
            }
        }

        // Search users
        function searchUsers() {
            const query = document.getElementById('search').value.toLowerCase();
            if (query === '') {
                users = [...originalUsers];
            } else {
                users = originalUsers.filter(user =>
                    user.username.toLowerCase().includes(query) ||
                    user.email.toLowerCase().includes(query)
                );
            }
            currentPage = 1;
            displayUsers();
        }

        // Edit user function
        function editUser(index) {
            const user = users[index];
            currentUserIndex = index;
            document.getElementById('editUsername').value = user.username;
            document.getElementById('editEmail').value = user.email;
            document.getElementById('editRole').value = user.role;
            document.getElementById('editSubscriptionStatus').value = user.subscriptionStatus;
            document.getElementById('editStartDate').value = user.startDate;
            document.getElementById('editEndDate').value = user.endDate;

            document.getElementById('editModal').classList.add('show');
        }

        // Close modal
        function closeModal() {
            document.getElementById('editModal').classList.remove('show');
        }

        // Save user change
        function saveUserChanges(event) {
            event.preventDefault();

            const updatedUser = {
                username: document.getElementById('editUsername').value,
                email: document.getElementById('editEmail').value,
                role: document.getElementById('editRole').value,
                subscriptionStatus: document.getElementById('editSubscriptionStatus').value,
                startDate: document.getElementById('editStartDate').value,
                endDate: document.getElementById('editEndDate').value,
            };

            users[currentUserIndex] = updatedUser;
            closeModal();
            displayUsers();
        }

        // Delete user function
        function deleteUser(index) {
            if (confirm('Are you sure you want to delete this user?')) {
                users.splice(index, 1);
                displayUsers();
            }
        }

        // Initial display
        displayUsers();
    </script>
</body>
</html>
