<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../static/css/font.css">
    <link rel="stylesheet" href="../static/css/dashboard.css">
    <script src="../static/js/script.js" defer></script>
    <title>Quizrev | Lessons</title>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar close">
      <header>
        <div class="img-text">
          <span class="image">
            <img src="../static/images/QLarge.svg" alt="logo">
          </span>
          <div class="text header-text">
            <h1 class="name">Quizrev</h1>
          </div>
        </div>
        <i class="bx bx-chevron-left toggle"></i>
      </header>
      <div class="menubar">
        <div class="menu">
          <ul class="links">
            <li class="navlinks">
              <a href="#"><i class="bx bx-home-smile"><span class="text nav-text"> Dashboard</span></i></a>
            </li>
            <li class="navlinks">
              <a href="#"><i class="bx bx-book-alt"><span class="text nav-text"> Libraries</span></i></a>
            </li>
            <li class="navlinks">
              <a href="#"><i class="bx bx-purchase-tag"><span class="text nav-text"> Plan</span></i></a>
            </li>
            <li class="navlinks">
              <a href="#"><i class="bx bxs-face"><span class="text nav-text"> Profile</span></i></a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Main Content - Lessons -->
    <div class="main-content dashboard">
      <!-- Dashboard Header -->
      <div class="dashboard-header">
        <h1 class="dashboard-title">{{ subject_name }}</h1>
        <div class="dashboard-buttons">
          <!-- {% if authored == 1 %} -->
          <button class="primary-btn" id="add-lesson-btn">Add Lesson</button>
          <!-- {% endif %} -->
        </div>
      </div>

      <span class="line"></span>

      <!-- Dashboard Content -->
      <div class="dashboard-content">
        <!-- Lessons -->
        <div class="lessons">
          <h3>Lessons</h3>
          <div class="grid">
            <!-- {% for lesson_id, lesson_name in contents %} -->
            <form action="/display" method="post" class="item">
              <input type="hidden" name="directory_type" value="lesson">
              <input type="hidden" name="directory_id" value="{{ lesson_id }}">
              <input type="hidden" name="authored" value="{{ authored }}">
              <input type="submit" value="{{ lesson_name }}" class="classroom-name">
              <!-- {% if authored == 1 %} -->
              <button type="button" class="delete-icon" data-lesson-id="{{ lesson_id }}">
                <i class="fa-solid fa-trash"></i>
              </button>
              <!-- {% endif %} -->
            </form>
            <!-- {% endfor %} -->
          </div>
        </div>
      </div>
    </div>

    <!-- Add Lesson Modal -->
    <div id="add-lesson-modal" class="modal">
      <div class="modal-content">
        <h3>Add Lesson</h3>
        <span class="modal-close" id="close-add-lesson">&times;</span>
        <form action="/add_directory" method="post">
          <input name="directory_name" placeholder="Enter Lesson Name">
          <button type="submit" class="primary-btn">Add</button>
        </form>
      </div>
    </div>

    <!-- Delete Lesson Modal -->
    <div id="delete-lesson-modal" class="modal">
      <div class="modal-content modal-centered">
        <h3>Delete Lesson</h3>
        <span class="modal-close" id="close-delete-lesson">&times;</span>
        <form id="delete-lesson-form" action="/delete_directory" method="post">
          <input type="hidden" name="directory_id" id="delete-lesson-id">
          <input type="hidden" name="directory_type" value="lesson">
          <p>Are you sure you want to delete this lesson?</p>
          <button type="submit" class="delete-btn">Delete</button>
        </form>
      </div>
    </div>

    <script>
      display_error();
    </script>
</body>
</html>